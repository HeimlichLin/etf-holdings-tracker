<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.etf.tracker.gui.MainViewController"
            prefWidth="960" prefHeight="720"
            fx:id="rootPane">

    <!-- é ‚éƒ¨ï¼šæ¨™é¡Œèˆ‡å·¥å…·åˆ— -->
    <top>
        <VBox fx:id="headerContainer">
            <!-- æ¨™é¡Œåˆ— -->
            <HBox alignment="CENTER_LEFT" spacing="12" styleClass="header-bar" fx:id="headerBar">
                <padding>
                    <Insets top="12" bottom="12" left="20" right="20"/>
                </padding>
                <Label text="ETF 00981A æŒå€‰è¿½è¹¤å™¨" styleClass="app-title"/>
                <Region HBox.hgrow="ALWAYS"/>
                
                <!-- å°ŽèˆªæŒ‰éˆ•çµ„ -->
                <HBox spacing="8" styleClass="nav-container" fx:id="navContainer">
                    <Button fx:id="navHomeButton" text="ä¸»ç•«é¢" 
                            onAction="#handleNavHome" styleClass="nav-button,nav-button-active"/>
                    <Button fx:id="navCompareButton" text="å€é–“æ¯”è¼ƒ" 
                            onAction="#handleNavCompare" styleClass="nav-button"/>
                </HBox>
                
                <Region HBox.hgrow="ALWAYS"/>
                <Label fx:id="statusLabel" text="å°±ç·’" styleClass="status-label"/>
            </HBox>

            <!-- å·¥å…·åˆ— -->
            <ToolBar styleClass="tool-bar" fx:id="toolBar">
                <Button fx:id="fetchButton" text="ðŸ”„ æŠ“å–æœ€æ–°è³‡æ–™" onAction="#handleFetchData"
                        styleClass="primary-button"/>
                <Separator orientation="VERTICAL"/>
                <Label text="é¸æ“‡æ—¥æœŸï¼š"/>
                <DatePicker fx:id="datePicker" onAction="#handleDateSelected" prefWidth="150"/>
                <Button fx:id="viewButton" text="ðŸ“‹ æª¢è¦–" onAction="#handleViewData"/>
                <Separator orientation="VERTICAL"/>
                <Button fx:id="refreshButton" text="ðŸ”ƒ é‡æ–°æ•´ç†" onAction="#handleRefresh"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Button text="ðŸ—‘ æ¸…ç†èˆŠè³‡æ–™" onAction="#handleCleanup" styleClass="secondary-button"/>
            </ToolBar>
        </VBox>
    </top>

    <!-- ä¸­å¤®ï¼šè³‡æ–™è¡¨æ ¼ -->
    <center>
        <VBox spacing="12" fx:id="contentContainer">
            <padding>
                <Insets top="16" bottom="16" left="20" right="20"/>
            </padding>

            <!-- æ‘˜è¦å€ -->
            <HBox spacing="24" alignment="CENTER_LEFT" styleClass="summary-bar" fx:id="summaryBar"
                  HBox.hgrow="ALWAYS">
                <padding>
                    <Insets top="14" bottom="14" left="20" right="20"/>
                </padding>
                <VBox alignment="CENTER" spacing="4">
                    <Label text="è³‡æ–™æ—¥æœŸ" styleClass="summary-label"/>
                    <Label fx:id="dataDateLabel" text="-" styleClass="summary-value"/>
                </VBox>
                <VBox alignment="CENTER" spacing="4">
                    <Label text="æˆåˆ†è‚¡æ•¸é‡" styleClass="summary-label"/>
                    <Label fx:id="stockCountLabel" text="-" styleClass="summary-value"/>
                </VBox>
                <VBox alignment="CENTER" spacing="4">
                    <Label text="ç¸½æ¬Šé‡" styleClass="summary-label"/>
                    <Label fx:id="totalWeightLabel" text="-" styleClass="summary-value"/>
                </VBox>
                <Region HBox.hgrow="ALWAYS"/>
                <VBox alignment="CENTER_RIGHT" spacing="4">
                    <Label text="æœ€å¾Œæ›´æ–°" styleClass="summary-label"/>
                    <Label fx:id="lastUpdateLabel" text="-" styleClass="summary-value-small"/>
                </VBox>
            </HBox>

            <!-- è³‡æ–™è¡¨æ ¼ -->
            <TableView fx:id="holdingsTable" VBox.vgrow="ALWAYS" styleClass="holdings-table">
                <columns>
                    <TableColumn fx:id="stockCodeColumn" text="è‚¡ç¥¨ä»£è™Ÿ" prefWidth="100" minWidth="80"/>
                    <TableColumn fx:id="stockNameColumn" text="è‚¡ç¥¨åç¨±" prefWidth="200" minWidth="120"/>
                    <TableColumn fx:id="sharesColumn" text="è‚¡æ•¸" prefWidth="150" minWidth="100"/>
                    <TableColumn fx:id="weightColumn" text="æ¬Šé‡(%)" prefWidth="100" minWidth="80"/>
                </columns>
                <placeholder>
                    <VBox alignment="CENTER" spacing="12" styleClass="empty-state">
                        <Label text="ðŸ“Š" styleClass="empty-state-icon"/>
                        <Label text="å°šç„¡è³‡æ–™" styleClass="empty-state-title"/>
                        <Label text="è«‹é»žæ“Šã€ŒæŠ“å–æœ€æ–°è³‡æ–™ã€å–å¾—æŒå€‰è³‡æ–™" styleClass="empty-state-message"/>
                    </VBox>
                </placeholder>
                <columnResizePolicy>
                    <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                </columnResizePolicy>
            </TableView>

            <!-- æœå°‹åˆ— -->
            <HBox spacing="12" alignment="CENTER_LEFT" fx:id="searchBar">
                <Label text="ðŸ” æœå°‹ï¼š"/>
                <TextField fx:id="searchField" promptText="è¼¸å…¥è‚¡ç¥¨ä»£è™Ÿæˆ–åç¨±..."
                           prefWidth="280" onKeyReleased="#handleSearch"/>
                <Button text="æ¸…é™¤" onAction="#handleClearSearch"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Label fx:id="recordCountLabel" text="å…± 0 ç­†è³‡æ–™" styleClass="hint-label"/>
            </HBox>
        </VBox>
    </center>

    <!-- åº•éƒ¨ï¼šç‹€æ…‹åˆ— -->
    <bottom>
        <HBox alignment="CENTER_LEFT" spacing="12" styleClass="status-bar" fx:id="statusBar">
            <padding>
                <Insets top="6" bottom="6" left="20" right="20"/>
            </padding>
            <ProgressIndicator fx:id="progressIndicator" visible="false" prefWidth="18" prefHeight="18"/>
            <Label fx:id="progressLabel" text=""/>
            <Region HBox.hgrow="ALWAYS"/>
            <Label text="F5 é‡æ–°æ•´ç†" styleClass="shortcut-hint"/>
            <Label text="|" styleClass="nav-separator"/>
            <Label fx:id="versionLabel" text="v1.0.0"/>
        </HBox>
    </bottom>

</BorderPane>
