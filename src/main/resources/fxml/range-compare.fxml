<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.etf.tracker.gui.view.RangeCompareViewController"
            prefWidth="1100" prefHeight="800"
            fx:id="rootPane">

    <!-- é ‚éƒ¨ï¼šæ¨™é¡Œèˆ‡æ—¥æœŸé¸æ“‡ -->
    <top>
        <VBox fx:id="headerContainer">
            <!-- æ¨™é¡Œåˆ— -->
            <HBox alignment="CENTER_LEFT" spacing="12" styleClass="header-bar" fx:id="headerBar">
                <padding>
                    <Insets top="12" bottom="12" left="20" right="20"/>
                </padding>
                <Button text="â† è¿”å›ž" onAction="#handleBack" styleClass="back-button"/>
                <Label text="å€é–“æŒå€‰æ¯”è¼ƒ" styleClass="page-title"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Label fx:id="statusLabel" text="å°±ç·’" styleClass="status-label"/>
            </HBox>

            <!-- æ—¥æœŸå€é–“é¸æ“‡å·¥å…·åˆ— -->
            <HBox spacing="16" alignment="CENTER_LEFT" styleClass="query-bar" fx:id="queryBar">
                <padding>
                    <Insets top="12" bottom="12" left="20" right="20"/>
                </padding>
                <Label text="èµ·å§‹æ—¥æœŸï¼š" styleClass="label-bold"/>
                <DatePicker fx:id="startDatePicker" prefWidth="160"/>
                <Label text="çµæŸæ—¥æœŸï¼š" styleClass="label-bold"/>
                <DatePicker fx:id="endDatePicker" prefWidth="160"/>
                <Button fx:id="compareButton" text="ðŸ“Š æ¯”è¼ƒ" onAction="#handleCompare" styleClass="primary-button"/>
                <Separator orientation="VERTICAL"/>
                <Button text="âš¡ å¿«é€Ÿé¸æ“‡" styleClass="secondary-button" onAction="#showQuickSelectMenu"/>
            </HBox>
        </VBox>
    </top>

    <!-- ä¸­å¤®ï¼šè³‡æ–™é¡¯ç¤ºå€ -->
    <center>
        <VBox spacing="12" fx:id="contentContainer">
            <padding>
                <Insets top="16" bottom="16" left="20" right="20"/>
            </padding>

            <!-- æ‘˜è¦çµ±è¨ˆå¡ç‰‡ -->
            <HBox spacing="24" alignment="CENTER" styleClass="summary-card" fx:id="summaryCard"
                  HBox.hgrow="ALWAYS">
                <padding>
                    <Insets top="18" bottom="18" left="24" right="24"/>
                </padding>
                <VBox alignment="CENTER" spacing="6">
                    <Label text="èµ·å§‹æ—¥æœŸ" styleClass="summary-label"/>
                    <Label fx:id="startDateLabel" text="-" styleClass="summary-value"/>
                </VBox>
                <Label text="â†’" styleClass="arrow-label"/>
                <VBox alignment="CENTER" spacing="6">
                    <Label text="çµæŸæ—¥æœŸ" styleClass="summary-label"/>
                    <Label fx:id="endDateLabel" text="-" styleClass="summary-value"/>
                </VBox>
                <Separator orientation="VERTICAL"/>
                <VBox alignment="CENTER" spacing="6" styleClass="summary-new">
                    <Label text="æ–°é€²" styleClass="summary-label"/>
                    <Label fx:id="newAdditionsLabel" text="0" styleClass="summary-value-new"/>
                </VBox>
                <VBox alignment="CENTER" spacing="6" styleClass="summary-removed">
                    <Label text="å‰”é™¤" styleClass="summary-label"/>
                    <Label fx:id="removalsLabel" text="0" styleClass="summary-value-removed"/>
                </VBox>
                <VBox alignment="CENTER" spacing="6" styleClass="summary-increased">
                    <Label text="å¢žæŒ" styleClass="summary-label"/>
                    <Label fx:id="increasedLabel" text="0" styleClass="summary-value-increased"/>
                </VBox>
                <VBox alignment="CENTER" spacing="6" styleClass="summary-decreased">
                    <Label text="æ¸›æŒ" styleClass="summary-label"/>
                    <Label fx:id="decreasedLabel" text="0" styleClass="summary-value-decreased"/>
                </VBox>
                <VBox alignment="CENTER" spacing="6">
                    <Label text="ä¸è®Š" styleClass="summary-label"/>
                    <Label fx:id="unchangedLabel" text="0" styleClass="summary-value"/>
                </VBox>
            </HBox>

            <!-- åˆ†é¡žæ¨™ç±¤é  -->
            <TabPane fx:id="categoryTabPane" VBox.vgrow="ALWAYS" tabClosingPolicy="UNAVAILABLE">
                <!-- æ–°é€²å¢žæŒ -->
                <Tab text="ðŸ†• æ–°é€²å¢žæŒ">
                    <VBox spacing="8">
                        <padding>
                            <Insets top="8" bottom="8" left="0" right="0"/>
                        </padding>
                        <TableView fx:id="newAdditionsTable" VBox.vgrow="ALWAYS" styleClass="change-table">
                            <columns>
                                <TableColumn fx:id="naStockCodeColumn" text="è‚¡ç¥¨ä»£è™Ÿ" prefWidth="100" minWidth="80"/>
                                <TableColumn fx:id="naStockNameColumn" text="è‚¡ç¥¨åç¨±" prefWidth="180" minWidth="120"/>
                                <TableColumn fx:id="naEndSharesColumn" text="æŒè‚¡æ•¸" prefWidth="130" minWidth="100"/>
                                <TableColumn fx:id="naEndWeightColumn" text="æ¬Šé‡(%)" prefWidth="100" minWidth="80"/>
                            </columns>
                            <placeholder>
                                <VBox alignment="CENTER" spacing="8" styleClass="empty-state">
                                    <Label text="ç„¡æ–°é€²å¢žæŒ" styleClass="placeholder-text"/>
                                </VBox>
                            </placeholder>
                            <columnResizePolicy>
                                <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                            </columnResizePolicy>
                        </TableView>
                    </VBox>
                </Tab>

                <!-- å‰”é™¤æ¸›æŒ -->
                <Tab text="ðŸš« å‰”é™¤æ¸›æŒ">
                    <VBox spacing="8">
                        <padding>
                            <Insets top="8" bottom="8" left="0" right="0"/>
                        </padding>
                        <TableView fx:id="removalsTable" VBox.vgrow="ALWAYS" styleClass="change-table">
                            <columns>
                                <TableColumn fx:id="rmStockCodeColumn" text="è‚¡ç¥¨ä»£è™Ÿ" prefWidth="100" minWidth="80"/>
                                <TableColumn fx:id="rmStockNameColumn" text="è‚¡ç¥¨åç¨±" prefWidth="180" minWidth="120"/>
                                <TableColumn fx:id="rmStartSharesColumn" text="åŽŸæŒè‚¡æ•¸" prefWidth="130" minWidth="100"/>
                                <TableColumn fx:id="rmStartWeightColumn" text="åŽŸæ¬Šé‡(%)" prefWidth="100" minWidth="80"/>
                            </columns>
                            <placeholder>
                                <VBox alignment="CENTER" spacing="8" styleClass="empty-state">
                                    <Label text="ç„¡å‰”é™¤æ¸›æŒ" styleClass="placeholder-text"/>
                                </VBox>
                            </placeholder>
                            <columnResizePolicy>
                                <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                            </columnResizePolicy>
                        </TableView>
                    </VBox>
                </Tab>

                <!-- å¢žæŒ -->
                <Tab text="ðŸ“ˆ å¢žæŒ">
                    <VBox spacing="8">
                        <padding>
                            <Insets top="8" bottom="8" left="0" right="0"/>
                        </padding>
                        <TableView fx:id="increasedTable" VBox.vgrow="ALWAYS" styleClass="change-table">
                            <columns>
                                <TableColumn fx:id="incStockCodeColumn" text="è‚¡ç¥¨ä»£è™Ÿ" prefWidth="80" minWidth="70"/>
                                <TableColumn fx:id="incStockNameColumn" text="è‚¡ç¥¨åç¨±" prefWidth="150" minWidth="100"/>
                                <TableColumn fx:id="incStartSharesColumn" text="èµ·å§‹è‚¡æ•¸" prefWidth="110" minWidth="90"/>
                                <TableColumn fx:id="incEndSharesColumn" text="çµæŸè‚¡æ•¸" prefWidth="110" minWidth="90"/>
                                <TableColumn fx:id="incSharesDiffColumn" text="å¢žæ¸›è‚¡æ•¸" prefWidth="100" minWidth="80"/>
                                <TableColumn fx:id="incChangeRatioColumn" text="è®ŠåŒ–çŽ‡(%)" prefWidth="90" minWidth="70"/>
                                <TableColumn fx:id="incWeightDiffColumn" text="æ¬Šé‡è®ŠåŒ–" prefWidth="90" minWidth="70"/>
                            </columns>
                            <placeholder>
                                <VBox alignment="CENTER" spacing="8" styleClass="empty-state">
                                    <Label text="ç„¡å¢žæŒ" styleClass="placeholder-text"/>
                                </VBox>
                            </placeholder>
                            <columnResizePolicy>
                                <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                            </columnResizePolicy>
                        </TableView>
                    </VBox>
                </Tab>

                <!-- æ¸›æŒ -->
                <Tab text="ðŸ“‰ æ¸›æŒ">
                    <VBox spacing="8">
                        <padding>
                            <Insets top="8" bottom="8" left="0" right="0"/>
                        </padding>
                        <TableView fx:id="decreasedTable" VBox.vgrow="ALWAYS" styleClass="change-table">
                            <columns>
                                <TableColumn fx:id="decStockCodeColumn" text="è‚¡ç¥¨ä»£è™Ÿ" prefWidth="80" minWidth="70"/>
                                <TableColumn fx:id="decStockNameColumn" text="è‚¡ç¥¨åç¨±" prefWidth="150" minWidth="100"/>
                                <TableColumn fx:id="decStartSharesColumn" text="èµ·å§‹è‚¡æ•¸" prefWidth="110" minWidth="90"/>
                                <TableColumn fx:id="decEndSharesColumn" text="çµæŸè‚¡æ•¸" prefWidth="110" minWidth="90"/>
                                <TableColumn fx:id="decSharesDiffColumn" text="å¢žæ¸›è‚¡æ•¸" prefWidth="100" minWidth="80"/>
                                <TableColumn fx:id="decChangeRatioColumn" text="è®ŠåŒ–çŽ‡(%)" prefWidth="90" minWidth="70"/>
                                <TableColumn fx:id="decWeightDiffColumn" text="æ¬Šé‡è®ŠåŒ–" prefWidth="90" minWidth="70"/>
                            </columns>
                            <placeholder>
                                <VBox alignment="CENTER" spacing="8" styleClass="empty-state">
                                    <Label text="ç„¡æ¸›æŒ" styleClass="placeholder-text"/>
                                </VBox>
                            </placeholder>
                            <columnResizePolicy>
                                <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                            </columnResizePolicy>
                        </TableView>
                    </VBox>
                </Tab>

                <!-- ä¸è®Š -->
                <Tab text="âž– ä¸è®Š">
                    <VBox spacing="8">
                        <padding>
                            <Insets top="8" bottom="8" left="0" right="0"/>
                        </padding>
                        <TableView fx:id="unchangedTable" VBox.vgrow="ALWAYS" styleClass="change-table">
                            <columns>
                                <TableColumn fx:id="uncStockCodeColumn" text="è‚¡ç¥¨ä»£è™Ÿ" prefWidth="100" minWidth="80"/>
                                <TableColumn fx:id="uncStockNameColumn" text="è‚¡ç¥¨åç¨±" prefWidth="180" minWidth="120"/>
                                <TableColumn fx:id="uncSharesColumn" text="æŒè‚¡æ•¸" prefWidth="130" minWidth="100"/>
                                <TableColumn fx:id="uncStartWeightColumn" text="èµ·å§‹æ¬Šé‡(%)" prefWidth="110" minWidth="90"/>
                                <TableColumn fx:id="uncEndWeightColumn" text="çµæŸæ¬Šé‡(%)" prefWidth="110" minWidth="90"/>
                                <TableColumn fx:id="uncWeightDiffColumn" text="æ¬Šé‡è®ŠåŒ–" prefWidth="100" minWidth="80"/>
                            </columns>
                            <placeholder>
                                <VBox alignment="CENTER" spacing="8" styleClass="empty-state">
                                    <Label text="ç„¡ä¸è®Š" styleClass="placeholder-text"/>
                                </VBox>
                            </placeholder>
                            <columnResizePolicy>
                                <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                            </columnResizePolicy>
                        </TableView>
                    </VBox>
                </Tab>
            </TabPane>

            <!-- åº•éƒ¨è³‡è¨Šåˆ— -->
            <HBox spacing="12" alignment="CENTER_LEFT" fx:id="footerBar">
                <Label fx:id="recordCountLabel" text="å…± 0 ç­†è®ŠåŒ–"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Label text="ðŸ”´ ç´…è‰²è¡¨ç¤ºå¢žæŒ/æ–°é€²ï¼ŒðŸŸ¢ ç¶ è‰²è¡¨ç¤ºæ¸›æŒ/å‰”é™¤" styleClass="hint-label"/>
            </HBox>
        </VBox>
    </center>

    <!-- åº•éƒ¨ï¼šç‹€æ…‹åˆ— -->
    <bottom>
        <HBox alignment="CENTER_LEFT" spacing="12" styleClass="status-bar" fx:id="statusBar">
            <padding>
                <Insets top="6" bottom="6" left="20" right="20"/>
            </padding>
            <ProgressIndicator fx:id="progressIndicator" visible="false" prefWidth="18" prefHeight="18"/>
            <Label fx:id="progressLabel" text=""/>
            <Region HBox.hgrow="ALWAYS"/>
            <Label text="ESC è¿”å›ž" styleClass="shortcut-hint"/>
            <Label text="|" styleClass="nav-separator"/>
            <Label text="ETF 00981A å€é–“æŒå€‰æ¯”è¼ƒ"/>
        </HBox>
    </bottom>
</BorderPane>
