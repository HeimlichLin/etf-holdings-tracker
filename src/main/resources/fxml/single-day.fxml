<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.etf.tracker.gui.view.SingleDayViewController"
            prefWidth="960" prefHeight="720"
            fx:id="rootPane">

    <!-- é ‚éƒ¨ï¼šæ¨™é¡Œèˆ‡æ—¥æœŸé¸æ“‡ -->
    <top>
        <VBox fx:id="headerContainer">
            <!-- æ¨™é¡Œåˆ— -->
            <HBox alignment="CENTER_LEFT" spacing="12" styleClass="header-bar" fx:id="headerBar">
                <padding>
                    <Insets top="12" bottom="12" left="20" right="20"/>
                </padding>
                <Button text="â† è¿”å›ž" onAction="#handleBack" styleClass="back-button"/>
                <Label text="å–®æ—¥æŒå€‰æŸ¥è©¢" styleClass="page-title"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Label fx:id="statusLabel" text="å°±ç·’" styleClass="status-label"/>
            </HBox>

            <!-- æŸ¥è©¢å·¥å…·åˆ— -->
            <HBox spacing="16" alignment="CENTER_LEFT" styleClass="query-bar" fx:id="queryBar">
                <padding>
                    <Insets top="12" bottom="12" left="20" right="20"/>
                </padding>
                <Label text="é¸æ“‡æ—¥æœŸï¼š" styleClass="label-bold"/>
                <DatePicker fx:id="datePicker" onAction="#handleDateSelected" prefWidth="160"/>
                <Button fx:id="queryButton" text="ðŸ” æŸ¥è©¢" onAction="#handleQuery" styleClass="primary-button"/>
                <Separator orientation="VERTICAL"/>
                <Label text="æœå°‹ï¼š"/>
                <TextField fx:id="searchField" promptText="è¼¸å…¥è‚¡ç¥¨ä»£è™Ÿæˆ–åç¨±..."
                           prefWidth="220" onKeyReleased="#handleSearch"/>
                <Button text="æ¸…é™¤" onAction="#handleClearSearch"/>
            </HBox>
        </VBox>
    </top>

    <!-- ä¸­å¤®ï¼šè³‡æ–™é¡¯ç¤ºå€ -->
    <center>
        <VBox spacing="12" fx:id="contentContainer">
            <padding>
                <Insets top="16" bottom="16" left="20" right="20"/>
            </padding>

            <!-- æ‘˜è¦è³‡è¨Š -->
            <HBox spacing="32" alignment="CENTER_LEFT" styleClass="summary-card" fx:id="summaryCard"
                  HBox.hgrow="ALWAYS">
                <padding>
                    <Insets top="16" bottom="16" left="24" right="24"/>
                </padding>
                <VBox alignment="CENTER" spacing="6">
                    <Label text="è³‡æ–™æ—¥æœŸ" styleClass="summary-label"/>
                    <Label fx:id="dataDateLabel" text="-" styleClass="summary-value"/>
                </VBox>
                <Separator orientation="VERTICAL"/>
                <VBox alignment="CENTER" spacing="6">
                    <Label text="æˆåˆ†è‚¡æ•¸é‡" styleClass="summary-label"/>
                    <Label fx:id="stockCountLabel" text="-" styleClass="summary-value"/>
                </VBox>
                <Separator orientation="VERTICAL"/>
                <VBox alignment="CENTER" spacing="6">
                    <Label text="ç¸½æ¬Šé‡" styleClass="summary-label"/>
                    <Label fx:id="totalWeightLabel" text="-" styleClass="summary-value"/>
                </VBox>
                <Region HBox.hgrow="ALWAYS"/>
                <VBox alignment="CENTER_RIGHT" spacing="6">
                    <Label text="å¯ç”¨æ—¥æœŸç¯„åœ" styleClass="summary-label"/>
                    <Label fx:id="dateRangeLabel" text="-" styleClass="summary-value-small"/>
                </VBox>
            </HBox>

            <!-- æŒå€‰è¡¨æ ¼ -->
            <TableView fx:id="holdingsTable" VBox.vgrow="ALWAYS" styleClass="holdings-table">
                <columns>
                    <TableColumn fx:id="indexColumn" text="#" prefWidth="50" minWidth="40"/>
                    <TableColumn fx:id="stockCodeColumn" text="è‚¡ç¥¨ä»£è™Ÿ" prefWidth="100" minWidth="80"/>
                    <TableColumn fx:id="stockNameColumn" text="è‚¡ç¥¨åç¨±" prefWidth="200" minWidth="120"/>
                    <TableColumn fx:id="sharesColumn" text="æŒè‚¡æ•¸" prefWidth="150" minWidth="100"/>
                    <TableColumn fx:id="weightColumn" text="æ¬Šé‡(%)" prefWidth="100" minWidth="80"/>
                </columns>
                <placeholder>
                    <VBox alignment="CENTER" spacing="12" styleClass="empty-state">
                        <Label text="ðŸ“…" styleClass="empty-state-icon"/>
                        <Label text="è«‹é¸æ“‡æ—¥æœŸ" styleClass="empty-state-title"/>
                        <Label text="é¸æ“‡æ—¥æœŸä¸¦é»žæ“Šã€ŒæŸ¥è©¢ã€æŒ‰éˆ•æª¢è¦–æŒå€‰è³‡æ–™" styleClass="empty-state-message"/>
                    </VBox>
                </placeholder>
                <columnResizePolicy>
                    <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                </columnResizePolicy>
            </TableView>

            <!-- åº•éƒ¨è³‡è¨Šåˆ— -->
            <HBox spacing="12" alignment="CENTER_LEFT" fx:id="footerBar">
                <Label fx:id="recordCountLabel" text="å…± 0 ç­†è³‡æ–™"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Label text="æŽ’åºï¼š"/>
                <ComboBox fx:id="sortComboBox" promptText="é¸æ“‡æŽ’åºæ–¹å¼" onAction="#handleSortChange" prefWidth="150"/>
            </HBox>
        </VBox>
    </center>

    <!-- åº•éƒ¨ï¼šç‹€æ…‹åˆ— -->
    <bottom>
        <HBox alignment="CENTER_LEFT" spacing="12" styleClass="status-bar" fx:id="statusBar">
            <padding>
                <Insets top="6" bottom="6" left="20" right="20"/>
            </padding>
            <ProgressIndicator fx:id="progressIndicator" visible="false" prefWidth="18" prefHeight="18"/>
            <Label fx:id="progressLabel" text=""/>
            <Region HBox.hgrow="ALWAYS"/>
            <Label text="ESC è¿”å›ž" styleClass="shortcut-hint"/>
            <Label text="|" styleClass="nav-separator"/>
            <Label text="ETF 00981A å–®æ—¥æŒå€‰æŸ¥è©¢"/>
        </HBox>
    </bottom>

</BorderPane>
